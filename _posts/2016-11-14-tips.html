<div class="HTML">
<p>
&#x2014;<br />
layout: default<br />
title: All tips<br />
&#x2014;<br />
</p>

</div>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6ec64e6">1. java</a>
<ul>
<li><a href="#orga56176c">1.1. decompile android apk</a></li>
</ul>
</li>
<li><a href="#org91b8c97">2. http</a>
<ul>
<li><a href="#org929645e">2.1. content-encoding</a></li>
<li><a href="#org6deeb23">2.2. filename</a></li>
</ul>
</li>
<li><a href="#orge70980f">3. ssh</a>
<ul>
<li><a href="#org9cd6a15">3.1. 上传本地key到服务器</a></li>
</ul>
</li>
<li><a href="#orgc5668bf">4. google host</a>
<ul>
<li><a href="#org2415efe">4.1. github</a></li>
</ul>
</li>
<li><a href="#orge3fd9c0">5. linux</a>
<ul>
<li><a href="#org1f05b27">5.1. system optimise</a></li>
<li><a href="#orgaa7698c">5.2. keyboard</a></li>
<li><a href="#org976e4c0">5.3. network</a></li>
<li><a href="#org303bbaf">5.4. productivity</a></li>
<li><a href="#orgad1b9f0">5.5. makefile</a></li>
</ul>
</li>
<li><a href="#org2cc9e53">6. emacs</a>
<ul>
<li><a href="#org93459d2">6.1. key</a></li>
<li><a href="#orgb8e6626">6.2. org-mode</a></li>
<li><a href="#orgef2cd3a">6.3. packages</a></li>
<li><a href="#orgaf0ef05">6.4. features</a></li>
</ul>
</li>
<li><a href="#org956b153">7. sql</a>
<ul>
<li><a href="#org7683138">7.1. distinct</a></li>
</ul>
</li>
<li><a href="#org3acf555">8. wireshark</a>
<ul>
<li><a href="#orgd2e8e28">8.1. tshark</a></li>
</ul>
</li>
<li><a href="#orgbec95f7">9. SSL/TLS</a>
<ul>
<li><a href="#org9196fe1">9.1. 内容加密</a></li>
</ul>
</li>
<li><a href="#org23f459b">10. git</a>
<ul>
<li><a href="#org9d9abaf">10.1. patch</a></li>
</ul>
</li>
<li><a href="#org050e5bd">11. android</a>
<ul>
<li><a href="#org10025c8">11.1. ContentProvider</a></li>
<li><a href="#org96b97b5">11.2. 小米adb</a></li>
<li><a href="#org0ec2b5d">11.3. run-as</a></li>
</ul>
</li>
<li><a href="#org549ccb0">12. Speedy</a></li>
<li><a href="#orgeb8b684">13. Algorithm</a>
<ul>
<li><a href="#orgbb98355">13.1. 排序算法</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org6ec64e6" class="outline-2">
<h2 id="org6ec64e6"><span class="section-number-2">1</span> java</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orga56176c" class="outline-3">
<h3 id="orga56176c"><span class="section-number-3">1.1</span> decompile android apk</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">
<pre class="src src-sh">$ unzip app.apk -d app
$ cd app; dex2jar.sh ./classes.dex
$ unzip ./classes_dex2jar.jar -d source
$ jd-gui&amp;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org91b8c97" class="outline-2">
<h2 id="org91b8c97"><span class="section-number-2">2</span> http</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-org929645e" class="outline-3">
<h3 id="org929645e"><span class="section-number-3">2.1</span> content-encoding</h3>
<div class="outline-text-3" id="text-2-1">
<ol class="org-ol">
<li>rfc2616 规定传输的内容可以进行压缩传输，content-length为压缩后的文件大小<br /></li>
<li>其中content-encoding可以指定4种值：<br />
<ol class="org-ol">
<li>gzip, 用gnu zip格式压缩<br /></li>
<li>compress, 采用unix的文件压缩程序<br /></li>
<li>deflate, 采用zlib格式压缩<br /></li>
<li>identity, 没有编码，如果没有content-encoding, 就默认为这种方式<br /></li>
</ol></li>
</ol>
</div>
</div>
<div id="outline-container-org6deeb23" class="outline-3">
<h3 id="org6deeb23"><span class="section-number-3">2.2</span> filename</h3>
<div class="outline-text-3" id="text-2-2">
<ol class="org-ol">
<li><p>
filename最早出现在rfc1806 中对"Content-Dispositon" 的定义：<br />
</p>
<p class="verse">
filename-parm := "filename" "=" value;<br />
</p>
<p>
value的取值根据rfc822 和rfc1521 定义。<br />
</p></li>
<li><p>
之后rfc2626(1999年http1.1标准），第19.5.1节介绍了"Content-Disposition"的定义[<a href="http://tools.ietf.org/html/rfc2616#section-19.5.1">rfc2616#section-19.5.1</a>]<br />
</p>
<p class="verse">
content-disposition = "Content-Disposition" ":"<br />
disposition-type *( ";" disposition-parm )<br />
disposition-type = "attachment" | disp-extension-token<br />
disposition-parm = filename-parm | disp-extension-parm<br />
filename-parm = "filename" "=" quoted-string<br />
disp-extension-token = token<br />
disp-extension-parm = token "=" ( token | quoted-string )<br />
</p>
<p>
其中就定义了filename,标准中指明filename不允许指定文件路径，仅作为完整文件名的最<br />
后一部分。还有一个例子：Content-Disposition: attachment; filename="fname.ext"。<br />
由此最早filename应该是"＝"后用（"）包含起来的ASCII码字符串，ISO-8859-1以外的字符<br />
应根据rfc2047 进行转换转换规则为filename= "<code>?" charset "?" encoding "?" encoded-text "?</code>"。<br />
</p></li>
<li>rfc2231 对rfc2047 的转换规则添加了扩展, 支持filename*= charset "'" [language] "'" encoded-text(percent-encode);<br />
（根据网上反馈资料，为了适配IE浏览器而采用的是混合模式，即：filename="encoded-text")<br /></li>
<li><p>
随着网络的发展，2011年rfc6266 对Content-Disposition 进行了规范。rfc6266指明：<br />
</p>
<p class="verse">
filename-parm = "filename" "<code>" value | "filename*" "</code>" ext-value<br />
</p>
<ul class="org-ul">
<li>如果使用filename ＝ value, value使用rfc2616的定义<br /></li>
<li>如果使用filename *＝ ext-value, ext-value使用rfc5987的定义，rfc5987 规定采用rfc2231 的转换规则<br /></li>
</ul></li>

<li>总结<br />
filename可能出现四种编码格式：<br />
<ul class="org-ul">
<li>rfc2616: filename="filename"<br /></li>
<li>rfc2047: filename="<code>?UTF-8?encoding?encoded-filename?</code>"<br /></li>
<li>rfc2231: filename*=UTF-8'[en]'percent-encoded-filename<br /></li>
<li>IE:      filename="percent-encoded-filename"!<br /></li>
</ul></li>

<li><p>
算法<br />
根据上述理论依据，以及参考android的guessfilename函数filename做如下解析：<br />
</p>
<div class="org-src-container">
<pre class="src src-c++">if (Content-Disposition != null) {
    if (get(filename*) != null) {
        rfc2231_decode();
    } else if (get(filename) != null) {
        if (rfc2047_decode() == ok) return;
        if (IE_decode() == ok) return;
        rfc2616_decode();
    }
} else {
    get_file_name_from_url();
}
if (mimetype != null) {
    append_extention_to_filename();
}
</pre>
</div></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-orge70980f" class="outline-2">
<h2 id="orge70980f"><span class="section-number-2">3</span> ssh</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-org9cd6a15" class="outline-3">
<h3 id="org9cd6a15"><span class="section-number-3">3.1</span> 上传本地key到服务器</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-sh">$ ssh-keygen -t  rsa
$ ssh-copy-id -i ~/.ssh/id_rsa.pub  root@192.168.0.3
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc5668bf" class="outline-2">
<h2 id="orgc5668bf"><span class="section-number-2">4</span> google host</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-org2415efe" class="outline-3">
<h3 id="org2415efe"><span class="section-number-3">4.1</span> <a href="https://github.com/racaljk/hosts/blob/master/hosts">github</a></h3>
</div>
</div>
<div id="outline-container-orge3fd9c0" class="outline-2">
<h2 id="orge3fd9c0"><span class="section-number-2">5</span> linux</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-org1f05b27" class="outline-3">
<h3 id="org1f05b27"><span class="section-number-3">5.1</span> system optimise</h3>
<div class="outline-text-3" id="text-5-1">
</div><div id="outline-container-orge715681" class="outline-4">
<h4 id="orge715681"><span class="section-number-4">5.1.1</span> free memery cache</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
sync &amp; echo 3 &gt; /proc/sys/vm/drop_caches<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgaa7698c" class="outline-3">
<h3 id="orgaa7698c"><span class="section-number-3">5.2</span> keyboard</h3>
<div class="outline-text-3" id="text-5-2">
</div><div id="outline-container-org448b881" class="outline-4">
<h4 id="org448b881"><span class="section-number-4">5.2.1</span> swap CAPSLOCK and CTRL</h4>
<div class="outline-text-4" id="text-5-2-1">
<div class="org-src-container">
<pre class="src src-sh">$ setxkbmap -option "ctrl:swapcaps"
$ xmodmap
  !
  ! Swap Caps_Lock and Control_L
  !
  remove Lock = Caps_Lock
  remove Control = Control_L
  keysym Control_L = Caps_Lock
  keysym Caps_Lock = Control_L
  add Lock = Caps_Lock
  add Control = Control_L
</pre>
</div>
</div>
</div>
<div id="outline-container-org3b20522" class="outline-4">
<h4 id="org3b20522"><span class="section-number-4">5.2.2</span> make CAPSLOCK an additional CTRL</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
setxkbmap -option "ctrl:nocaps"<br />
</p>
</div>
</div>
</div>
<div id="outline-container-org976e4c0" class="outline-3">
<h3 id="org976e4c0"><span class="section-number-3">5.3</span> network</h3>
<div class="outline-text-3" id="text-5-3">
</div><div id="outline-container-org1535fa7" class="outline-4">
<h4 id="org1535fa7"><span class="section-number-4">5.3.1</span> dns cache cleanup</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
sudo /etc/init.d/dns-clean restart<br />
</p>
</div>
</div>
<div id="outline-container-org16e7183" class="outline-4">
<h4 id="org16e7183"><span class="section-number-4">5.3.2</span> dns nameserver</h4>
<div class="outline-text-4" id="text-5-3-2">
<ul class="org-ul">
<li>add nameservers to /etc/network/interfaces #only 3<br /></li>
<li>add nameservers to /etc/resolvconf/resolv.conf.d/tail<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org6dfcadc" class="outline-4">
<h4 id="org6dfcadc"><span class="section-number-4">5.3.3</span> vpn log</h4>
<div class="outline-text-4" id="text-5-3-3">
<p>
tail -f /var/log/syslog<br />
</p>
</div>
</div>
</div>
<div id="outline-container-org303bbaf" class="outline-3">
<h3 id="org303bbaf"><span class="section-number-3">5.4</span> productivity</h3>
<div class="outline-text-3" id="text-5-4">
<ol class="org-ol">
<li>paste [按列合并文件]<br /></li>
<li>sed -r 's#(.*)(.*)#echo \2#ge' [pass matched group to shell command]<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgad1b9f0" class="outline-3">
<h3 id="orgad1b9f0"><span class="section-number-3">5.5</span> makefile</h3>
<div class="outline-text-3" id="text-5-5">
</div><div id="outline-container-orgaca28ff" class="outline-4">
<h4 id="orgaca28ff"><span class="section-number-4">5.5.1</span> variable assignments</h4>
<div class="outline-text-4" id="text-5-5-1">
<p>
1, makefile中的变量赋值其实就是字符串替换<br />
2, "<code>" 递归展开变量：如果变量的定义引用了其它的变量，那么引用会一直展开下去，直到找到被引用的变量的最新的定义，并以此作为改变量的值返回
3, ":</code>" 简单扩展变量：在变量的定义点，按照被引用的变量的当前值进行展开<br />
4, "+=" 为已定义的变量添加新的值<br />
5, "?=" 赋默认值：如果没有初始化该变量，就给它赋上默认值<br />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org2cc9e53" class="outline-2">
<h2 id="org2cc9e53"><span class="section-number-2">6</span> emacs</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-org93459d2" class="outline-3">
<h3 id="org93459d2"><span class="section-number-3">6.1</span> key</h3>
<div class="outline-text-3" id="text-6-1">
</div><div id="outline-container-orgb8bfbce" class="outline-4">
<h4 id="orgb8bfbce"><span class="section-number-4">6.1.1</span> Blank</h4>
<div class="outline-text-4" id="text-6-1-1">
<ol class="org-ol">
<li>'C-x C-o' :delete-blank-lines [Delete extra blank lines between paragraphs]<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgb36b00c" class="outline-4">
<h4 id="orgb36b00c"><span class="section-number-4">6.1.2</span> File mode</h4>
<div class="outline-text-4" id="text-6-1-2">
</div><div id="outline-container-org69a25e6" class="outline-5">
<h5 id="org69a25e6"><span class="section-number-5">6.1.2.1</span> Open file in c++-mode</h5>
<div class="outline-text-5" id="text-6-1-2-1">
<ol class="org-ol">
<li>put "// -*-c++-*-" at the top of the file<br /></li>
<li>(add-to-list 'auto-mode-alist '("\\.h\\'" . c++-mode))<br /></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org1ef8c51" class="outline-4">
<h4 id="org1ef8c51"><span class="section-number-4">6.1.3</span> lines</h4>
<div class="outline-text-4" id="text-6-1-3">
<ol class="org-ol">
<li>'C-o' :open-line [Insert a blank line after the cursor]<br /></li>
<li>'C-M-o' :split-line [new line, and align it at same column of cursor]<br /></li>
<li>'M-^' :join this line to previous line<br /></li>
<li>'C-u M-^' :join following line to this line<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgdca0ba7" class="outline-4">
<h4 id="orgdca0ba7"><span class="section-number-4">6.1.4</span> Indent</h4>
<div class="outline-text-4" id="text-6-1-4">
<ol class="org-ol">
<li>'M-/^/' :delete-indentation [join two line, and delete the front indentation of cursor]<br /></li>
<li>'C-M \' :indent-region [indents each line in the “usual” way]<br /></li>
<li>'&lt;TAB&gt;' :indent-region<br /></li>
<li>'C-x &lt;TAB&gt;' :indent-rigidly<br /></li>
<li>'M-m' :back-to-indentation<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgf316d68" class="outline-4">
<h4 id="orgf316d68"><span class="section-number-4">6.1.5</span> Spaces</h4>
<div class="outline-text-4" id="text-6-1-5">
<ol class="org-ol">
<li>'M-\' :delete-horizontal-space [deletes all spaces and tabs around the cursor]<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orge79aba5" class="outline-4">
<h4 id="orge79aba5"><span class="section-number-4">6.1.6</span> upcase/downcase</h4>
<div class="outline-text-4" id="text-6-1-6">
<ol class="org-ol">
<li>'M-l' :downcase-word [Convert following word to lower case]<br /></li>
<li>'M-u' :upcase-word [Convert following word to upper case]<br /></li>
<li>'M-c' :capitalize-word [Capitalize the following word]<br /></li>
<li>'C-x C-l' :downcase-region [Convert region to lower case]<br /></li>
<li>'C-x C-u' :upcase-region [Convert region to upper case]<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgd9d584b" class="outline-4">
<h4 id="orgd9d584b"><span class="section-number-4">6.1.7</span> align</h4>
<div class="outline-text-4" id="text-6-1-7">
<ol class="org-ol">
<li>:align-current<br /></li>
<li>:align-regexp [lets you align a region by a regex in complex ways]<br /></li>
</ol>
</div>
</div>
<div id="outline-container-org4b2b155" class="outline-4">
<h4 id="org4b2b155"><span class="section-number-4">6.1.8</span> rectangles</h4>
<div class="outline-text-4" id="text-6-1-8">
<ol class="org-ol">
<li>'C-x r k' :kill-rectangle<br /></li>
<li>'C-x r d' :delete-rectangle<br /></li>
<li>'C-x r y' :yank-rectangle<br /></li>
<li>'C-x r o' :open-rectangle [Insert blank space to fill the space of the region-rectangle]<br /></li>
<li>'C-x r c' :clear-rectangle<br /></li>
<li>'M-x delete-whitespace-rectangle'<br /></li>
<li>'C-x r t' <i>string</i> &lt;RET&gt; :string-rectangle [Replace rectangle contents with string on each line]<br /></li>
<li>'M-x string-insert-rectangle &lt;RET&gt;' <i>string</i> &lt;RET&gt; [Insert string on each line of the rectangle.]<br /></li>
<li>'[C-u] C-x r N' :rectangle-number-lines<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgc1c1c6a" class="outline-4">
<h4 id="orgc1c1c6a"><span class="section-number-4">6.1.9</span> org mode</h4>
<div class="outline-text-4" id="text-6-1-9">
<ol class="org-ol">
<li>'C-c '(single quote)' : [edit included source code]<br /></li>
</ol>
</div>
</div>
<div id="outline-container-org14d7eb1" class="outline-4">
<h4 id="org14d7eb1"><span class="section-number-4">6.1.10</span> Search</h4>
<div class="outline-text-4" id="text-6-1-10">
<ol class="org-ol">
<li>'C-M-s' : [regex i-search]<br /></li>
<li>'M-c' : [Typing M-c within an incremental search toggles the case sensitivity of that search.]<br /></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgb8e6626" class="outline-3">
<h3 id="orgb8e6626"><span class="section-number-3">6.2</span> org-mode</h3>
<div class="outline-text-3" id="text-6-2">
</div><div id="outline-container-org0d932f9" class="outline-4">
<h4 id="org0d932f9"><span class="section-number-4">6.2.1</span> key</h4>
<div class="outline-text-4" id="text-6-2-1">
<ol class="org-ol">
<li>'C-c C-j' : org-goto<br /></li>
<li>'C-c C-v' : org-babel<br /></li>
<li>To insert a structural element, type a ‘&lt;’, followed by a template selector and &lt;TAB&gt;.<br /></li>
</ol>
<p class="verse">
s	#+BEGIN_SRC &#x2026; #+END_SRC<br />
e	#+BEGIN_EXAMPLE &#x2026; #+END_EXAMPLE<br />
q	#+BEGIN_QUOTE &#x2026; #+END_QUOTE<br />
v	#+BEGIN_VERSE &#x2026; #+END_VERSE<br />
c	#+BEGIN_CENTER &#x2026; #+END_CENTER<br />
l	#+BEGIN_LaTeX &#x2026; #+END_LaTeX<br />
L	#+LaTeX:<br />
h	#+BEGIN_HTML &#x2026; #+END_HTML<br />
H	#+HTML:<br />
a	#+BEGIN_ASCII &#x2026; #+END_ASCII<br />
A	#+ASCII:<br />
i	#+INDEX: line<br />
I	#+INCLUDE: line<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgef2cd3a" class="outline-3">
<h3 id="orgef2cd3a"><span class="section-number-3">6.3</span> packages</h3>
<div class="outline-text-3" id="text-6-3">
</div><div id="outline-container-org20ef9cf" class="outline-4">
<h4 id="org20ef9cf"><span class="section-number-4">6.3.1</span> update</h4>
<div class="outline-text-4" id="text-6-3-1">
<ol class="org-ol">
<li>[list-packages]: press 'U' for all packages which can be upgraded, and key 'x' to do upgrading.<br /></li>
<li>[helm-list-elisp-packages]: 'M-U'<br /></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgaf0ef05" class="outline-3">
<h3 id="orgaf0ef05"><span class="section-number-3">6.4</span> features</h3>
<div class="outline-text-3" id="text-6-4">
</div><div id="outline-container-org4c62abe" class="outline-4">
<h4 id="org4c62abe"><span class="section-number-4">6.4.1</span> coding</h4>
<div class="outline-text-4" id="text-6-4-1">
<ol class="org-ol">
<li>[set-buffer-file-coding-system]: 设置文件编码<br /></li>
</ol>
</div>
</div>
</div>
</div>
<div id="outline-container-org956b153" class="outline-2">
<h2 id="org956b153"><span class="section-number-2">7</span> sql</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-org7683138" class="outline-3">
<h3 id="org7683138"><span class="section-number-3">7.1</span> distinct</h3>
<div class="outline-text-3" id="text-7-1">
<ol class="org-ol">
<li>select distinct(id) from table; [选择并去重]<br /></li>
<li>select count(distinct id) from table; [计算不重复的个数]<br /></li>
<li>select *,count(distinct id) from table group by id; [以id为临时主键选取数据]<br /></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org3acf555" class="outline-2">
<h2 id="org3acf555"><span class="section-number-2">8</span> wireshark</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-orgd2e8e28" class="outline-3">
<h3 id="orgd2e8e28"><span class="section-number-3">8.1</span> tshark</h3>
<div class="outline-text-3" id="text-8-1">
<ol class="org-ol">
<li>analysis pcap file<br /></li>
</ol>
<p>
tshark -r ssl_capture.pcap -d tcp.port==4443,ssl -R "(tcp.dstport eq 4443 and tcp.flags.syn == 1) or (tcp.srcport eq 4443 and ssl.change_cipher_spec)" -T fields -e frame.time_relative 2&gt; /dev/null<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgbec95f7" class="outline-2">
<h2 id="orgbec95f7"><span class="section-number-2">9</span> SSL/TLS</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-org9196fe1" class="outline-3">
<h3 id="org9196fe1"><span class="section-number-3">9.1</span> 内容加密</h3>
<div class="outline-text-3" id="text-9-1">
<p>
加密算法分两种：对称加密和非对称加密。所谓对称加密（也叫密钥加密）就是加密和解密使用相同的密钥。而非对称加密（也叫公钥加密）就是指加密和解密使用了不同的密钥。<br />
</p>
</div>
<div id="outline-container-org17f8370" class="outline-4">
<h4 id="org17f8370"><span class="section-number-4">9.1.1</span> 非对称密钥交换</h4>
<div class="outline-text-4" id="text-9-1-1">
</div><div id="outline-container-org99c4419" class="outline-5">
<h5 id="org99c4419"><span class="section-number-5">9.1.1.1</span> RSA密钥协商过程</h5>
<div class="outline-text-5" id="text-9-1-1-1">
<ol class="org-ol">
<li>客户端发送client_hello, 包含随机数R1<br /></li>
<li>服务端回复server_hello，包含随机数R2，以及包含证书公钥P的certificate<br /></li>
<li>客户端使用R2生成premaster_secret和master_secret。premaster_secret长度为48个字节，前两个字节是协议版本，剩下的填充一个随机数<br />
Master_key = PRF(premaster_secrect, "master secert", R1 + R2)<br />
至此，客户端侧的密钥已经完成协商。<br /></li>
<li>客户端使用P加密premaster_secret并发送给服务端<br /></li>
<li>服务端使用私钥解密得到premaster_secret，使用相同的公式就可以得到master_secret<br /></li>
</ol>
</div>
</div>
<div id="outline-container-org3acae28" class="outline-5">
<h5 id="org3acae28"><span class="section-number-5">9.1.1.2</span> ECDHE密钥协商</h5>
<div class="outline-text-5" id="text-9-1-1-2">
<ol class="org-ol">
<li>客户端发送client_hello，包含随机数R1和两个扩展<br />
1）elliptic_curves：客户端支持的曲线类型和有限域参数<br />
2）ec_point_formats：支持的曲线点格式，默认uncompressed<br /></li>
<li>服务端回复server_hello，包含随机数R2及ECC扩展。<br /></li>
<li>服务端回复certificate，携带了公钥<br /></li>
<li>服务端生成ECDH临时公钥，同时回复server_key_exchange，包含三个重要内容：<br />
1）ECC相关参数<br />
2）ECDH临时公钥<br />
3）ECC参数和公钥生成的签名值，用户客户端校验<br /></li>
<li>客户端接受server_key_exchange之后，使用证书公钥进行签名解密和校验，获取服务器端的ECDH临时公钥，生成共享密钥<br />
至此，客户端完成密钥协商<br /></li>
<li>客户端生成ECDH临时公钥和client_key_exchange消息，不需要加密<br /></li>
<li>服务器处理client_key_exchange消息，获取客户端ECDH临时公钥，最总生成共享密钥<br /></li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org23f459b" class="outline-2">
<h2 id="org23f459b"><span class="section-number-2">10</span> git</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-org9d9abaf" class="outline-3">
<h3 id="org9d9abaf"><span class="section-number-3">10.1</span> patch</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">
<pre class="src src-sh">$ git format -n commit //生成最近n个点的patch
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org050e5bd" class="outline-2">
<h2 id="org050e5bd"><span class="section-number-2">11</span> android</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-org10025c8" class="outline-3">
<h3 id="org10025c8"><span class="section-number-3">11.1</span> ContentProvider</h3>
<div class="outline-text-3" id="text-11-1">
</div><div id="outline-container-orgedab63b" class="outline-4">
<h4 id="orgedab63b"><span class="section-number-4">11.1.1</span> 基本概念</h4>
<div class="outline-text-4" id="text-11-1-1">
<p>
安卓不同应用或服务间共享数据的一种方式，C/S模式，提供insert/delete/update/query四种接口，使用SQL语法设计接口参数。<br />
</p>
</div>
</div>
<div id="outline-container-org71a5c69" class="outline-4">
<h4 id="org71a5c69"><span class="section-number-4">11.1.2</span> 开发指导</h4>
<div class="outline-text-4" id="text-11-1-2">
</div><div id="outline-container-org69bfbb4" class="outline-5">
<h5 id="org69bfbb4"><span class="section-number-5">11.1.2.1</span> Provider</h5>
<div class="outline-text-5" id="text-11-1-2-1">
<ol class="org-ol">
<li>继承android.content.ContentProvider, 实现insert/delete/update/query四个接口<br /></li>
<li>manifest文件中在application节点定义provider，包括name/authorities和permission。可以使用path-permission限定数据访问集合<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-java">&lt;application&gt;
        &lt;provider android:name=".BookmarkProvider"
                  android:authorities="com.android.browser;browser"
                  android:multiprocess="false"
                  android:exported="true"
                  android:readPermission="com.android.browser.permission.READ_HISTORY_BOOKMARKS"
                  android:writePermission="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS"&gt;
            &lt;path-permission android:path="/bookmarks/search_suggest_query"
                    android:readPermission="android.permission.GLOBAL_SEARCH" /&gt;
        &lt;/provider&gt;
    &lt;/application&gt;
</pre>
</div>
<ol class="org-ol">
<li>使用UriMatcher指定Content Uri Path和ID，指向不同的数据集<br /></li>
</ol>
</div>
</div>
<div id="outline-container-org59c31dd" class="outline-5">
<h5 id="org59c31dd"><span class="section-number-5">11.1.2.2</span> Requester</h5>
<div class="outline-text-5" id="text-11-1-2-2">
<ol class="org-ol">
<li>manifest文件中声明permission<br /></li>
<li>使用getContentResolver().insert/query/update/delete<br /></li>
</ol>
</div>
</div>
<div id="outline-container-orgbb37ca8" class="outline-5">
<h5 id="orgbb37ca8"><span class="section-number-5">11.1.2.3</span> 关于global_search</h5>
<div class="outline-text-5" id="text-11-1-2-3">
<ol class="org-ol">
<li>Provider声明了android.permission.GLOBAL_SEARCH，其他应用可以在不知道authority的情况下获取需要的数据<br /></li>
<li>Provider要添加res/xml/searchable.xml，关键说明searchSuggestAuthority、searchSuggestPath和searchSuggestSelection<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-java">&lt;searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name_title"
    android:includeInGlobalSearch="true"
    android:searchSettingsDescription="@string/bookmarks_fragment_title"
    android:searchSuggestAuthority="com.android.browser"
    android:searchSuggestIntentAction="android.intent.action.VIEW"
    android:searchSuggestPath="bookmarks"
    android:searchSuggestSelection="url LIKE ?"/&gt;
</pre>
</div>
<ol class="org-ol">
<li>Requester可以通过SearchManager.getSearchablesInGlobalSearch，获得searchable列表，从而得到想要的数据<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-java">SearchManager searchManager = (SearchManager) this.getSystemService(Context.SEARCH_SERVICE);
        List&lt;SearchableInfo&gt; searchableInfos = searchManager.getSearchablesInGlobalSearch();
        if (searchableInfos == null) return null;
        for (SearchableInfo si : searchableInfos) {
            ...
        }
</pre>
</div>
</div>
</div>
<div id="outline-container-org27a042a" class="outline-5">
<h5 id="org27a042a"><span class="section-number-5">11.1.2.4</span> 其他</h5>
<div class="outline-text-5" id="text-11-1-2-4">
<ol class="org-ol">
<li>content uri格式: content://authority/path[/#id]<br /></li>
<li>command tools:<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-shell">$ adb shell content
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org96b97b5" class="outline-3">
<h3 id="org96b97b5"><span class="section-number-3">11.2</span> 小米adb</h3>
<div class="outline-text-3" id="text-11-2">
<p>
1, <b>#*#717717#*#</b> 调试号码<br />
</p>
</div>
</div>
<div id="outline-container-org0ec2b5d" class="outline-3">
<h3 id="org0ec2b5d"><span class="section-number-3">11.3</span> run-as</h3>
<div class="outline-text-3" id="text-11-3">
<p>
1, 非root手机，debug包，以包名用户运行<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">$ adb shell
$ run-as com.android.browser
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org549ccb0" class="outline-2">
<h2 id="org549ccb0"><span class="section-number-2">12</span> Speedy</h2>
</div>
<div id="outline-container-orgeb8b684" class="outline-2">
<h2 id="orgeb8b684"><span class="section-number-2">13</span> Algorithm</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-orgbb98355" class="outline-3">
<h3 id="orgbb98355"><span class="section-number-3">13.1</span> 排序算法</h3>
<div class="outline-text-3" id="text-13-1">
</div><div id="outline-container-orge32ba15" class="outline-5">
<h5 id="orge32ba15"><span class="section-number-5">13.1.0.1</span> 快速排序</h5>
<div class="outline-text-5" id="text-13-1-0-1">
</div><ol class="org-ol"><li><a id="org76caa37"></a>算法步骤<br /><div class="outline-text-6" id="text-13-1-0-1-1">
<ol class="org-ol">
<li>选择一个元素作为基准值<br /></li>
<li>把比基准值小的元素放左边，比基准值大的放右边，一样大的可换可不换<br /></li>
<li>按相同的方式分别处理基准值两侧的元素集合<br /></li>
</ol>
<p>
经过一趟快排后，基准值的位置就固定了<br />
</p>
</div></li>
<li><a id="org0c32a6d"></a>性能<br /><div class="outline-text-6" id="text-13-1-0-1-2">
<p>
平均状况下时间复杂度是O(nlogn), 最差情况下是O(n^2)<br />
</p>
</div></li></ol>
</div>
<div id="outline-container-org447c367" class="outline-5">
<h5 id="org447c367"><span class="section-number-5">13.1.0.2</span> 堆排序算法</h5>
<div class="outline-text-5" id="text-13-1-0-2">
</div><ol class="org-ol"><li><a id="org04acb68"></a>算法步骤<br /><div class="outline-text-6" id="text-13-1-0-2-1">
<ol class="org-ol">
<li>把n个元素的集合建立成堆<br /></li>
<li>将堆顶和最后一个元素调换<br /></li>
<li>将剩余n-1个元素重复a-&gt;b的过程<br /></li>
</ol>
<p>
利用大小堆的近似完全二叉树的存储结构，建堆取堆顶元素<br />
</p>
</div></li>
<li><a id="org2bb76a2"></a>性能<br /><div class="outline-text-6" id="text-13-1-0-2-2">
<p>
平均性能的时间复杂度是O(nlogn)<br />
辅助空间是O(1)<br />
是一种不稳定的排序算法<br />
</p>
</div></li></ol>
</div>
<div id="outline-container-org8af01d5" class="outline-5">
<h5 id="org8af01d5"><span class="section-number-5">13.1.0.3</span> 归并排序</h5>
<div class="outline-text-5" id="text-13-1-0-3">
</div><ol class="org-ol"><li><a id="org20745af"></a>算法步骤<br /><div class="outline-text-6" id="text-13-1-0-3-1">
<p>
应用分治法<br />
</p>
<ol class="org-ol">
<li>请空间，使其大小为两个已排序序列大小之和<br /></li>
<li>用两个指针，分别指向两个序列的首部<br /></li>
<li>较两个指针指向的元素大小，选择相对小的放到合并空间，指针移位<br /></li>
<li>复c，直到有指针到尾<br /></li>
<li>另一个指针的元素直接合并到申请空间<br /></li>
</ol>
</div></li>
<li><a id="org2d958b0"></a>性能<br /><div class="outline-text-6" id="text-13-1-0-3-2">
<p>
仅次于快排，是一种稳定的算法。<br />
时间复杂度是O(nlogn)，空间复杂度是O(n)<br />
</p>
</div></li></ol>
</div>
<div id="outline-container-orgd0ad8f5" class="outline-5">
<h5 id="orgd0ad8f5"><span class="section-number-5">13.1.0.4</span> 二分查找</h5>
<div class="outline-text-5" id="text-13-1-0-4">
<p>
必须顺序存储，必须按关键字有序<br />
</p>
</div>
<ol class="org-ol"><li><a id="orgd7c6ca1"></a>算法步骤<br /><div class="outline-text-6" id="text-13-1-0-4-1">
<ol class="org-ol">
<li>选择中间位置，比较大小<br /></li>
<li>如果不同，则继续在相应的折半区间从中间位置开始比较<br /></li>
</ol>
</div></li>
<li><a id="org8d046bb"></a>性能<br /><div class="outline-text-6" id="text-13-1-0-4-2">
<p>
时间复杂度O(logn)<br />
</p>
</div></li></ol>
</div>
<div id="outline-container-org0cd69ff" class="outline-5">
<h5 id="org0cd69ff"><span class="section-number-5">13.1.0.5</span> BFPRT(线性查找算法)</h5>
<div class="outline-text-5" id="text-13-1-0-5">
<p>
从n个元素中选取第k大小的元素，可以保证在最坏情况下仍为线性复杂度<br />
</p>
</div>
<ol class="org-ol"><li><a id="org100d5a2"></a>算法步骤<br /><div class="outline-text-6" id="text-13-1-0-5-1">
<ol class="org-ol">
<li>将n个元素按5个一组，分成n/5组<br /></li>
<li>使用任意排序方法排列每个分组，确定每个组的中位数<br /></li>
<li>按1-&gt;2递归的选取最后的中位数x，偶数个元素选取较小的一个<br /></li>
<li>用x来分割元素集，比x小的[k]放左边，大的[n-k]放右边，即快排的一次分区(partion)<br /></li>
<li>如果i==k，则返回x；如果i&lt;k，则在小于x的元素中递归查找第i小的元素；否则在大于x的元素中查找第i-k小的元素<br /></li>
</ol>
</div></li>
<li><a id="orgb59b766"></a>性能<br /><div class="outline-text-6" id="text-13-1-0-5-2">
<p>
最坏情况下时间复杂度为O(n)<br />
</p>
</div></li></ol>
</div>
<div id="outline-container-org18ae1e4" class="outline-5">
<h5 id="org18ae1e4"><span class="section-number-5">13.1.0.6</span> DFS(深度优先搜索)</h5>
<div class="outline-text-5" id="text-13-1-0-6">
<p>
沿着树的深度遍历树的节点，尽可能深的搜索树的分支。当节点v的所有边都己被探寻过，搜索将回溯到发现节点v的那条边的起始节点<br />
</p>
</div>
<ol class="org-ol"><li><a id="orgb7f346a"></a>算法步骤<br /><div class="outline-text-6" id="text-13-1-0-6-1">
<ol class="org-ol">
<li>选取图中某一顶点Vi，访问并标记该顶点<br /></li>
<li>以Vi为当前顶点，依次搜索Vi的邻接点Vj；如果Vj没有被访问过，则访问和标记Vj；如果Vj已经被访问过，则访问Vi的下一个邻接点<br /></li>
<li>以Vj为当前顶点，重复步骤2)，直到图中和Vi有路径相通的点都被访问过<br /></li>
<li>如果图中还有尚未被访问的点，则选取一个重复上面的过程，直到所有的点被访问<br /></li>
</ol>
</div></li>
<li><a id="org4d6196b"></a>性能<br /><div class="outline-text-6" id="text-13-1-0-6-2">
<p>
是盲目搜索，迷宫问题/8皇后问题<br />
</p>
</div></li></ol>
</div>
<div id="outline-container-org40fcef6" class="outline-5">
<h5 id="org40fcef6"><span class="section-number-5">13.1.0.7</span> BFS(广度优先算法)</h5>
<div class="outline-text-5" id="text-13-1-0-7">
<p>
BFS是从根节点开始，沿着树(图)的宽度遍历树(图)的节点。如果所有节点均被访问，则算法中止<br />
</p>
</div>
<ol class="org-ol"><li><a id="org8664bb5"></a>算法步骤<br /><div class="outline-text-6" id="text-13-1-0-7-1">
<p>
用队列辅助实现<br />
</p>
<ol class="org-ol">
<li>首先将根节点放入队列<br /></li>
<li>从队列中取出第一个节点，检验是否为目标，否则将其直接子节点放入队列中<br /></li>
<li>若队列为空，表示整张图都已经遍历过了<br /></li>
<li>重复步骤2<br /></li>
</ol>
</div></li>
<li><a id="org93072bd"></a>性能<br /><div class="outline-text-6" id="text-13-1-0-7-2">
<p>
是盲目搜索<br />
</p>
</div></li></ol>
</div>
<div id="outline-container-orgb08bd28" class="outline-5">
<h5 id="orgb08bd28"><span class="section-number-5">13.1.0.8</span> Dijkstra算法</h5>
<div class="outline-text-5" id="text-13-1-0-8">
<p>
典型的单源最短路径算法，用于计算一个节点到其他所有节点的最短路径<br />
</p>
</div>
<ol class="org-ol"><li><a id="org83a4bd0"></a>算法步骤<br /><div class="outline-text-6" id="text-13-1-0-8-1">
<ol class="org-ol">
<li>初始时，S只包含一个源点，s={v}。U包含其他顶点，若v与U中顶点有连接，则&lt;v,u&gt;有权重，否则为无穷大<br /></li>
<li>从U中选取一个距离v最小的点k，把k列入S中<br /></li>
<li>以k为新考虑的中间点，计算U中各顶点的距离；若从k经过的到u的距离比原来的距离短，则修改u的距离值，为经过k的距离值<br /></li>
<li>重复2)-&gt;3)，直到所有点都在S中<br /></li>
</ol>
</div></li></ol>
</div>
<div id="outline-container-org8ecae3e" class="outline-5">
<h5 id="org8ecae3e"><span class="section-number-5">13.1.0.9</span> 动态规划算法</h5>
<div class="outline-text-5" id="text-13-1-0-9">
<p>
参看<a href="https://www.topcoder.com/community/data-science/data-science-tutorials/dynamic-programming-from-novice-to-advanced/">dynamic-programming-from-novice-to-advanced</a><br />
中文版<a href="http://www.hawstein.com/posts/dp-novice-to-advanced.html">动态规划：从新手到专家</a><br />
</p>
</div>
</div>
</div>
</div>
